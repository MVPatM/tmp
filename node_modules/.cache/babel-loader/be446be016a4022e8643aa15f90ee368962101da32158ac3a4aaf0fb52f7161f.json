{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/hsy99/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/prj1/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/hsy99/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/prj1/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/hsy99/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/prj1/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import styles from\"./mintnftcss.module.css\";import apiClient from'../utils/axios1';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MintNFT(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),minting=_useState2[0],setMinting=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),uploaded=_useState4[0],setUploaded=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),mintedNFT=_useState6[0],setMintedNFT=_useState6[1];var handleDragOver=function handleDragOver(event){event.preventDefault();};var handleDrop=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var file,formData,response,data,metaData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();setUploaded(true);file=event.dataTransfer.files[0];formData=new FormData();formData.append('file',file);_context.prev=5;_context.next=8;return apiClient.post(\"mintNFT/upload\",formData);case 8:response=_context.sent;data=response.data;if(data.ismintsuccess===true){setMinting(true);setMintedNFT(data.nft);}else if(data.ismintsuccess===false){alert(data.msg);}_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](5);alert(\"Mint error: \".concat(_context.t0));case 16:if(!mintedNFT){_context.next=21;break;}metaData=mintedNFT.metaData;return _context.abrupt(\"return\",/*#__PURE__*/_jsxs(\"div\",{className:styles.dragmessage,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.result,children:\"Result MetaData\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Column : \",metaData.columns]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Data size : \",metaData.dataSize]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Null Ratio : \",metaData.nullRatio]})]}));case 21:return _context.abrupt(\"return\",null);case 22:case\"end\":return _context.stop();}},_callee,null,[[5,13]]);}));return function handleDrop(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:styles.mintnft,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.fileupload,onDragOver:handleDragOver,onDrop:handleDrop,children:[minting===false&&/*#__PURE__*/_jsx(\"div\",{className:styles.dragmessage,children:uploaded?\"Minting ...\":\"Drag your csv file\"}),minting===true&&/*#__PURE__*/_jsxs(\"div\",{className:styles.dragmessage,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.result,children:\"Result MetaData\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Column : \",mintedNFT&&mintedNFT.metaData.columns]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Data size : \",mintedNFT&&mintedNFT.metaData.dataSize]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Null Ratio : \",mintedNFT&&mintedNFT.metaData.nullRatio]})]})]})});}export default MintNFT;","map":{"version":3,"names":["React","useState","styles","apiClient","jsx","_jsx","jsxs","_jsxs","MintNFT","_useState","_useState2","_slicedToArray","minting","setMinting","_useState3","_useState4","uploaded","setUploaded","_useState5","_useState6","mintedNFT","setMintedNFT","handleDragOver","event","preventDefault","handleDrop","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","file","formData","response","data","metaData","wrap","_callee$","_context","prev","next","dataTransfer","files","FormData","append","post","sent","ismintsuccess","nft","alert","msg","t0","concat","abrupt","className","dragmessage","children","result","columns","dataSize","nullRatio","stop","_x","apply","arguments","mintnft","fileupload","onDragOver","onDrop"],"sources":["C:/Users/hsy99/OneDrive/바탕 화면/prj1/client/src/components/MintNFT/MintNFT.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport styles from \"./mintnftcss.module.css\";\r\nimport apiClient from '../utils/axios1';\r\n\r\n\r\nfunction MintNFT(){\r\n    const [minting, setMinting] = useState(false);\r\n    const [uploaded, setUploaded] = useState(false);\r\n    const [mintedNFT, setMintedNFT] = useState(null);\r\n    const handleDragOver = (event) => {\r\n        event.preventDefault();\r\n    }\r\n\r\n    const handleDrop = async (event) => {\r\n        event.preventDefault();\r\n        setUploaded(true);\r\n        const file = event.dataTransfer.files[0];\r\n        const formData = new FormData();\r\n        formData.append('file', file);\r\n\r\n        try {\r\n            const response = await apiClient.post(\"mintNFT/upload\", formData);\r\n            const data = response.data;\r\n        \r\n            if (data.ismintsuccess === true) {\r\n              setMinting(true);\r\n              setMintedNFT(data.nft);\r\n            } else if (data.ismintsuccess === false) {\r\n              alert(data.msg);\r\n            }\r\n        } catch (err) {\r\n            alert(`Mint error: ${err}`);\r\n        }\r\n\r\n        if (mintedNFT) {\r\n            const metaData = mintedNFT.metaData;\r\n            return (\r\n                <div className={styles.dragmessage}>\r\n                    <div className = {styles.result}>Result MetaData</div>\r\n                    <div>Column : {metaData.columns}</div>\r\n                    <div>Data size : {metaData.dataSize}</div>\r\n                    <div>Null Ratio : {metaData.nullRatio}</div>\r\n                </div>\r\n            );\r\n        } else {\r\n            return null;\r\n        }\r\n        \r\n        /*\r\n        await apiClient\r\n            .post(\"mintNFT/upload\", formData)\r\n            .then((res) => {\r\n                if (res.data.ismintsuccess === true){\r\n                    setMinting(true);\r\n                    alert(`${res.data.nft.columns}`)\r\n                    alert(`${res.data.nft.dataSize}`)\r\n                    setMintedNFT(res.data.nft);\r\n                    alert('mint success');\r\n                }\r\n                else if (res.data.ismintsuccess === false) {\r\n                    alert(`${res.data.msg}`);\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                alert(`Mint error ${err}`);\r\n            })\r\n            */\r\n        \r\n    }\r\n\r\n    return (\r\n        <div className={styles.mintnft}>\r\n            <div className={styles.fileupload} onDragOver = {handleDragOver} onDrop = {handleDrop}>\r\n            {minting === false && <div className={styles.dragmessage}>{uploaded ? \"Minting ...\" : \"Drag your csv file\"}</div>}\r\n            {minting === true && ( <div className={styles.dragmessage}>\r\n                <div className = {styles.result}>Result MetaData</div>\r\n                <div>Column : {mintedNFT && mintedNFT.metaData.columns}</div>\r\n                <div>Data size : {mintedNFT && mintedNFT.metaData.dataSize}</div>\r\n                <div>Null Ratio : {mintedNFT && mintedNFT.metaData.nullRatio}</div>\r\n                </div>)}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MintNFT;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}